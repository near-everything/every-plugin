---
title: Getting Started
description: Install and run your first plugin with the every-plugin runtime
---

## Installation

```bash
bun add every-plugin
```

## Core Concept

The **every-plugin** runtime uses [Effect](https://effect.website/) and [Module Federation](https://module-federation.io/) to load and execute remote plugins.

Effect provides automatic resource cleanup and composable async operations, while Module Federation enables dynamic loading of JavaScript modules from remote URLs.

## First Plugin Execution

```typescript
import { Effect } from "effect";
import { createPluginRuntime, PluginRuntime } from "every-plugin/runtime";

// Create runtime once per application
const runtime = createPluginRuntime({
  registry: {
    "data-processor": {
      remoteUrl: "https://cdn.example.com/plugins/data-processor/remoteEntry.js",
      type: "transformer",
      version: "1.0.0"
    }
  },
  secrets: {
    API_KEY: "your-secret-key"
  }
});

// Execute plugin with Effect composition
const result = await runtime.runPromise(
  Effect.gen(function* () {
    const pluginRuntime = yield* PluginRuntime;
    
    const plugin = yield* pluginRuntime.usePlugin("data-processor", {
      secrets: {
        apiKey: "{{API_KEY}}", // Hydrated from secrets
      },
      variables: {
        batchSize: 100,
      },
    });
    
    return yield* pluginRuntime.executePlugin(plugin, {
      items: ["data1", "data2", "data3"]
    });
  })
);

console.log(result);
await runtime.disposeRuntime(); // Cleanup
```

## Effect Composition

Use `Effect.gen()` with `yield*` to compose operations:

```typescript
const workflow = Effect.gen(function* () {
  const pluginRuntime = yield* PluginRuntime;
  
  // Each yield* unwraps an Effect and handles errors automatically
  const plugin = yield* pluginRuntime.usePlugin("my-plugin", config);
  const output = yield* pluginRuntime.executePlugin(plugin, input);
  
  return output;
});

const result = await runtime.runPromise(workflow);
```

## Resource Cleanup

Always dispose the runtime when shutting down:

```typescript
process.on("SIGTERM", async () => {
  await runtime.disposeRuntime();
  process.exit(0);
});
```

## Next Steps

<Cards>
  <Card title="Basic Usage" href="/docs/runtime/basic-usage">
    Learn Effect patterns and plugin lifecycle
  </Card>
  <Card title="API Reference" href="/docs/runtime/api-reference">
    Complete runtime method reference
  </Card>
  <Card title="Creating Plugins" href="/docs/plugins">
    Build your own plugins
  </Card>
</Cards>
